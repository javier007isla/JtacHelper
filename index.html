<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>JTAC Tactical Helper</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
:root{
--bg:#0b0f0c;--panel:#121815;--accent:#5f7f5f;
--danger:#b04444;--text:#d8e0d8;
--jtac:#6fa86f;--air:#6fa0c8;
}
body{margin:0;font-family:Consolas,monospace;background:var(--bg);color:var(--text)}
header{padding:12px;text-align:center;border-bottom:2px solid var(--accent)}
.container{max-width:1100px;margin:auto;padding:10px}
.section{background:var(--panel);border:1px solid #1e2a22;border-radius:6px;margin-bottom:12px}
.section summary{cursor:pointer;padding:10px;font-weight:bold;color:var(--accent)}
.section-content{padding:10px}
.grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(220px,1fr));gap:8px}
input,select{width:100%;background:#0c110d;border:1px solid #2a3a30;color:var(--text);padding:6px;border-radius:4px;font-family:inherit;font-size:.85rem}
button{background:var(--accent);border:none;padding:8px 12px;border-radius:4px;font-weight:bold;cursor:pointer}
.output{background:#070a08;border:1px dashed #2a3a30;padding:8px;white-space:pre-wrap;font-size:.8rem;margin-top:8px}
.hidden{display:none}
.jtac{color:var(--jtac);font-weight:bold}
.air{color:var(--air);font-weight:bold}
.danger{color:var(--danger);font-weight:bold}
.small{font-size:.75rem;color:#9fb59f}
.grid label{display:flex;align-items:center;gap:8px;padding:6px 10px;border:1px solid #2a3a30;border-radius:4px;background:#0c110d;cursor:pointer;}
.grid label:hover{background:#111813;}
.grid label input[type="checkbox"]{margin:0;width:14px;height:14px;cursor:pointer;}
.grid{gap:8px;}
.grid input,
.grid select,
.grid textarea{padding:6px 8px;margin:0;box-sizing:border-box;}

</style>
</head>

<body>
<header><h1>JTAC Tactical Helper</h1></header>
<div class="container">

<!-- CALLSIGNS -->
<details class="section">
<summary>CALLSIGNS</summary>
<div class="section-content grid">
<input id="cs_jtac" placeholder="JTAC / FAC Callsign">
<!-- <input id="cs_ground" placeholder="Unidad terrestre"> -->
</div>
</details>

<!-- CHECK-IN -->
<details class="section">
<summary>CHECK-IN AERONAVES</summary>
<div class="section-content">

<select id="airSelect" onchange="switchAir()">
<option value="0">Aeronave 1</option>
<option value="1">Aeronave 2</option>
<option value="2">Aeronave 3</option>
</select>
<div class="small">La aeronave seleccionada es la ACTIVA</div>

<div class="grid">
<input id="air_cs" placeholder="Callsign">
<input id="air_type" placeholder="Tipo aeronave">
<input id="air_weap" placeholder="Armamento">
<input id="air_time" placeholder="Playtime">
<input id="air_sens" placeholder="Sensores">
<input id="air_fuel" placeholder="Fuel">
</div>

</div>
</details>

<!-- CAS -->
<details class="section">
<summary>CAS (3 / 6 / 9 LINE)</summary>
<div class="section-content">

<select id="linerSelect" onchange="updateLiner()">
<option value="3">3-Line</option>
<option value="6">6-Line</option>
<option value="9" selected>9-Line</option>
</select>

<div class="grid" id="linerFields">
<input data-line="1" placeholder="L1 IP / BP">
<input data-line="2" placeholder="L2 Heading">
<input data-line="3" placeholder="L3 Distancia">
<input data-line="4" placeholder="L4 Elevaci√≥n">
<input data-line="5" placeholder="L5 Descripci√≥n objetivo">
<input data-line="6" placeholder="L6 Ubicaci√≥n objetivo">
<input data-line="7" placeholder="L7 Tipo de marcaci√≥n">
<input data-line="8" placeholder="L8 Tropas amigas">
<input data-line="9" placeholder="L9 Egress">
<input id="casRemarks" placeholder="REMARKS (final / restricciones / notas)">
</div>

<br>

<div class="grid">
<label><input type="checkbox" name="castype" value="Type 1"> CAS Type 1</label>
<label><input type="checkbox" name="castype" value="Type 2"> CAS Type 2</label>
<label><input type="checkbox" name="castype" value="Type 3"> CAS Type 3</label>
<label class="danger"><input type="checkbox" id="dangerClose"> Danger Close</label>
</div>

<br>
<button onclick="genCAS('radio')">üéô Voz corrida</button>
<button onclick="genCAS('texto')">üìÑ Texto estructurado</button>

<div id="casOutput" class="output"></div>

</div>
</details>

<!-- ARTILLER√çA -->
<!--
<details class="section">
<summary>ARTILLER√çA ¬∑ CALL FOR FIRE</summary>
<div class="section-content">

<div class="grid">
<select id="arty_type">
  <option value="Adjust Fire">Adjust Fire</option>
  <option value="Fire for Effect">Fire for Effect</option>
</select>
<input id="arty_target" placeholder="Ubicaci√≥n objetivo">
<input id="arty_desc" placeholder="Descripci√≥n del objetivo">
<select id="arty_method">
  <option value="Polar">Polar</option>
  <option value="Grid">Grid</option>
  <option value="Shift">Shift from Known Point</option>
</select>
<input id="arty_ammo" placeholder="Munici√≥n / efecto deseado">
<label class="danger">
  <input type="checkbox" id="arty_danger"> Danger Close
</label>
</div>

<br>
<button onclick="genARTY('radio')">üéô Voz corrida</button>
<button onclick="genARTY('texto')">üìÑ Texto estructurado</button>

<div id="artyOutput" class="output"></div>

</div>
</details>
-->

</div>

<script>
const airStore=[{},{},{}];
let currentAir=0;

function saveAir(){
airStore[currentAir]={
cs:air_cs.value,
type:air_type.value,
weap:air_weap.value,
time:air_time.value,
sens:air_sens.value,
fuel:air_fuel.value
};
}

function loadAir(){
const a=airStore[currentAir];
air_cs.value=a.cs||"";
air_type.value=a.type||"";
air_weap.value=a.weap||"";
air_time.value=a.time||"";
air_sens.value=a.sens||"";
air_fuel.value=a.fuel||"";
}

function switchAir(){
saveAir();
currentAir=parseInt(airSelect.value);
loadAir();
}

function updateLiner(){
const l=linerSelect.value;
document.querySelectorAll("#linerFields input").forEach(i=>{
i.classList.remove("hidden");
if(l==3&&i.dataset.line>3)i.classList.add("hidden");
if(l==6&&i.dataset.line>6)i.classList.add("hidden");
});
}
updateLiner();

document.querySelectorAll('input[name="castype"]').forEach(cb=>{
cb.addEventListener("change",()=>{
document.querySelectorAll('input[name="castype"]').forEach(o=>{
if(o!==cb)o.checked=false;
});
});
});

function genCAS(mode){
saveAir();
const jtac=cs_jtac.value||"JTAC";
const liner=linerSelect.value;
const castype=[...document.querySelectorAll('input[name="castype"]')]
.find(c=>c.checked)?.value || "CAS";
const activeAir = airStore[currentAir];
const fields=[...document.querySelectorAll("#linerFields input")]
.filter(i=>!i.classList.contains("hidden")&&i.value&&i.id!=="casRemarks");
const remarks=document.getElementById("casRemarks").value;
let out="";

if(mode==="radio"){
out+=`<span class="jtac">${jtac}</span>: ${castype}, check-in recibido.<br>`;
if(activeAir.cs){
out+=`<span class="air">${activeAir.cs}</span>: ${activeAir.type}, ${activeAir.weap}, playtime ${activeAir.time}, sensors ${activeAir.sens}.<br>`;
}
out+=`<span class="jtac">${jtac}</span>: ${liner}-line, listo para copiar.<br>`;
fields.forEach(f=>out+=`${f.value}, `);
if(dangerClose.checked)out+=`<span class="danger">DANGER CLOSE</span>, `;
if(remarks)out+=`remarks ${remarks}, `;
out+=`how copy?`;
}else{
out+=`<span class="jtac">JTAC:</span> ${jtac}<br>`;
out+=`${castype}<br><br>`;
if(activeAir.cs){
out+=`<span class="air">${activeAir.cs}</span>: ${activeAir.type}, ${activeAir.weap}, playtime ${activeAir.time}, sensors ${activeAir.sens}.<br>`;
}
out+=`CAS ${liner}-LINE<br>`;
fields.forEach(f=>out+=`- ${f.value}<br>`);
if(dangerClose.checked)out+=`<span class="danger">‚ö† DANGER CLOSE</span>`;
}

casOutput.innerHTML=out;
}
function genARTY(mode){
  const obs = cs_jtac.value || "JTAC";
  const type = arty_type.value;
  const tgt = arty_target.value;
  const desc = arty_desc.value;
  const method = arty_method.value;
  const ammo = arty_ammo.value;
  const dc = arty_danger.checked;
  let out = "";

  if(mode==="radio"){
    out+=`<span class="jtac">${obs}</span>: Call for Fire, ${type}.<br>`;
    out+=`${method}, target ${tgt}. ${desc}.<br>`;
    if(ammo) out+=`Request ${ammo}.<br>`;
    if(dc) out+=`<span class="danger">DANGER CLOSE</span>.<br>`;
    out+=`Over.`;
  } else {
    out+=`<span class="jtac">Observer:</span> ${obs}<br>`;
    out+=`Mission: ${type}<br><br>`;
    out+=`Target Location: ${tgt}<br>`;
    out+=`Method: ${method}<br>`;
    out+=`Description: ${desc}<br>`;
    if(ammo) out+=`Requested Effects: ${ammo}<br>`;
    if(dc) out+=`<br><span class="danger">‚ö† DANGER CLOSE</span>`;
  }

  artyOutput.innerHTML = out;
}

</script>

</body>
</html>
